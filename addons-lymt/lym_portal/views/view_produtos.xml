<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <template id="view_produtos" name="Produtos">
            <t t-call="website.layout">
                <t t-set="additional_title">Lista de produtos</t>
                <div class="container" style="font-size: 160%;">
                    <div class="row align-center col-12" style="margin: 1.6rem; justify-content: center;">
                        <a class="btn btn-primary" href="/myportal/produtos/cadastro" style="font-size: 160%; border-radius: 1.6rem;">Cadastrar um novo produto</a>
                    </div>
                    <div class="row">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Nº</th>
                                    <th scope="col">Nome</th>
                                    <th scope="col">Preço</th>
                                    <th scope="col">URL</th>
                                    <th scope="col">Descrição</th>
                                    <th scope="col">Imagem</th>
                                    <th scope="col">Validado</th>
                                    <th scope="col">Feedback</th>
                                    <th scope="col">Edit</th>
                                    <th scope="col">Delete</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-set="count" t-value="1" />
                                <t t-foreach="produtos" t-as="p">
                                    <tr>
                                        <th scope="row">
                                            <t t-raw="count" />
                                        </th>
                                        <td>
                                            <t t-raw="p.name" />
                                        </td>
                                        <td>
                                            <t t-raw="'{:.2f}'.format(p.list_price).replace('.',',')" />
                                        </td>
                                        <td>
                                            <a t-att-href="p.url" target="_blank">
                                                <t t-raw="p.url" />
                                            </a>
                                        </td>
                                        <td>
                                            <t t-raw="p.description_sale" />
                                        </td>
                                        <td>
                                            <img t-if="p.image_1920" t-att-src="image_data_uri(p.image_1920)" alt="Imagem" style="max-width: 150px; max-height: 150px;" />
                                        </td>
                                        <td>
                                            <t t-if="p.valid">
                                                <i class="fa fa-circle-o" />
                                            </t>
                                            <t t-else="">
                                                <i class="fa fa-close" />
                                            </t>
                                        </td>
                                        <td>
                                            <t t-raw="p.feedback" />
                                        </td>
                                        <td>
                                            <a t-attf-href="/myportal/produtos/edit/{{p.id}}">
                                                <i class="fa fa-pencil" />
                                            </a>
                                        </td>
                                        <td>
                                            <a t-attf-href="/myportal/produtos/delete/{{p.id}}">
                                                <i class="fa fa-trash" />
                                            </a>
                                        </td>
                                        <t t-set="count" t-value="count + 1" />
                                    </tr>
                                </t>
                            </tbody>
                        </table>
                    </div>
                </div>
            </t>
        </template>

    </data>
</odoo>